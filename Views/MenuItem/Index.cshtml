@using BrewMVC.ViewModel
@using BrewMVC.ViewModel.MenuItems
@using System.Text.RegularExpressions
@model CategoryMenuItemVM
@{
    ViewData["Title"] = "Menu";
}

<main class="container">
    <header class="mb-4 mt-4">
        <h1 class="custom-heading">Our Menu</h1>
    </header>

    @foreach (var category in Model.MenuByCategory)
    {
        // Generate a safe HTML ID for category
        string categoryId = Regex.Replace(category.Key.Trim().ToLower().Replace(" ", "-"), @"[^a-z0-9\-]", "");

        <!-- Menu category section -->
        <section class="mb-5" aria-labelledby="category-@categoryId">
            <header class="mb-4">
                <h2 class="custom-h2" id="category-@categoryId">@category.Key</h2>
            </header>

            <div class="row">
                @foreach (var item in category.Value)
                {
                    <div class="col-md-6 col-lg-4 mb-4">
                        <!-- Individual menu item -->
                        <article class="card h-100">
                            <img src="@item.ImageUrl"
                                 class="card-img-top"
                                 style="height:300px; object-fit:cover;"
                                 alt="Image of @item.Name" />
                            <div class="card-body d-flex flex-column">
                                <h3 class="visually-hidden">@item.Name</h3>
                                <p class="card-text flex-grow-1">@item.Description</p>
                                <p class="card-text fw-bold" 
                                   aria-label="Price: @item.Price.ToString("C")">
                                   @item.Price.ToString("C")
                                </p>
                            </div>
                        </article>
                    </div>
                }
            </div>
        </section>
    }
</main>